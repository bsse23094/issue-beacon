<div class="min-h-screen" style="background: var(--bg-primary);">
  <!-- Hero Header -->
  <header class="relative overflow-hidden" style="background: linear-gradient(135deg, rgba(10, 14, 26, 0.95) 0%, rgba(15, 20, 32, 0.98) 100%);">
    <div class="absolute inset-0" style="background: rgba(0, 0, 0, 0.3);"></div>
    
    <!-- Animated Orbs -->
    <div class="absolute top-10 right-10 w-64 h-64 rounded-full blur-3xl float" 
         style="background: radial-gradient(circle, rgba(6, 182, 212, 0.3) 0%, rgba(6, 182, 212, 0.1) 50%, transparent 80%);"></div>
    <div class="absolute bottom-10 left-10 w-56 h-56 rounded-full blur-3xl float" 
         style="background: radial-gradient(circle, rgba(168, 85, 247, 0.25) 0%, rgba(168, 85, 247, 0.1) 60%, transparent 90%); animation-delay: 2s;"></div>
    
    <div class="relative max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
      <a routerLink="/" class="inline-flex items-center gap-2 text-cyan-400 hover:text-cyan-300 font-semibold mb-6 transform hover:translate-x-1 transition-all group">
        <svg class="w-5 h-5 transform group-hover:-translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
        </svg>
        Back to Issues
      </a>
      <h1 class="text-4xl font-extrabold text-white drop-shadow-lg font-display">Issue Details</h1>
    </div>
  </header>

  <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-12 relative z-10">
    <!-- Loading State -->
    <div *ngIf="loading" class="flex flex-col items-center justify-center py-20">
      <div class="spinner mb-4"></div>
      <p class="text-gray-400 font-medium animate-pulse">Loading issue details...</p>
    </div>

    <!-- Error State -->
  <div *ngIf="error" class="glass-card glass-alert glass-alert--danger rounded-2xl p-8 mb-6">
      <div class="flex items-center gap-3">
        <svg class="w-6 h-6 text-red-400" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
        </svg>
        <p class="text-red-300 font-semibold">{{ error }}</p>
      </div>
    </div>

    <!-- Issue Content -->
    <div *ngIf="!loading && issue" class="space-y-6">
      <!-- Issue Header Card -->
      <div class="premium-card rounded-2xl p-8 hover:shadow-2xl transition-all duration-300">
        <div class="flex items-start gap-6 mb-6">
          <!-- State Icon -->
          <div [class]="'w-16 h-16 rounded-2xl flex items-center justify-center text-3xl flex-shrink-0 ' + 
                       (issue.state === 'open' ? 'bg-green-500/20 text-green-400' : 'bg-purple-500/20 text-purple-400')">
            <span *ngIf="issue.state === 'open'">●</span>
            <span *ngIf="issue.state === 'closed'">✓</span>
          </div>
          
          <div class="flex-1">
            <div class="flex items-start justify-between gap-4 mb-4">
              <h2 class="text-3xl font-extrabold text-white font-display">
                {{ issue.title }}
              </h2>
              <span class="text-gray-500 font-mono text-lg font-bold flex-shrink-0">#{{ issue.number }}</span>
            </div>
            
            <!-- State Badge -->
            <span [class]="'inline-flex items-center px-4 py-2 rounded-full text-sm font-bold ' + 
                          (issue.state === 'open' ? 'bg-green-500/20 text-green-400 border border-green-500/30' : 'bg-purple-500/20 text-purple-400 border border-purple-500/30')">
              {{ issue.state === 'open' ? 'Open' : 'Closed' }}
            </span>
          </div>
        </div>

        <!-- Meta Info -->
        <div class="flex flex-wrap items-center gap-6 text-sm mb-6 pb-6 border-b border-gray-800">
          <div class="flex items-center gap-3">
            <img [src]="issue.user.avatar_url" [alt]="issue.user.login" class="w-10 h-10 rounded-full ring-2 ring-cyan-500/50 shadow-lg">
            <div>
              <div class="font-bold text-white">{{ issue.user.login }}</div>
              <div class="text-gray-500 text-xs">Author</div>
            </div>
          </div>
          
          <div class="flex items-center gap-2 text-gray-400">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path>
            </svg>
            <span>opened {{ getRelativeTime(issue.created_at) }}</span>
          </div>
          
          <div *ngIf="issue.comments > 0" class="flex items-center gap-2 font-bold text-cyan-400">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path>
            </svg>
            {{ issue.comments }} {{ issue.comments === 1 ? 'comment' : 'comments' }}
          </div>
        </div>

        <!-- Labels -->
        <div *ngIf="issue.labels.length > 0" class="flex flex-wrap gap-2">
          <span
            *ngFor="let label of issue.labels"
            class="label inline-flex items-center px-3 py-1.5 text-xs font-semibold rounded-full transition-all duration-200 hover:scale-105"
            [style.background]="'rgba(' + hexToRgb(label.color) + ', 0.15)'"
            [style.border]="'1px solid rgba(' + hexToRgb(label.color) + ', 0.35)'"
            [style.color]="'#' + label.color"
          >
            {{ label.name }}
          </span>
        </div>
      </div>

      <!-- Issue Body Card -->
      <div class="premium-card rounded-2xl overflow-hidden">
        <div class="px-8 py-4 border-b border-gray-800" style="background: rgba(6, 182, 212, 0.05);">
          <div class="flex items-center gap-4">
            <img [src]="issue.user.avatar_url" [alt]="issue.user.login" class="w-10 h-10 rounded-full ring-2 ring-cyan-500/50 shadow-lg">
            <div>
              <div class="font-bold text-white text-base">{{ issue.user.login }}</div>
              <div class="text-sm text-gray-400">commented {{ getRelativeTime(issue.created_at) }}</div>
            </div>
          </div>
        </div>
        
        <div class="p-8">
          <div 
            *ngIf="renderedBody; else noBody" 
            class="markdown-body prose-invert max-w-none"
            [innerHTML]="renderedBody"
          ></div>
          <ng-template #noBody>
            <div class="text-center py-12 text-gray-500 italic">
              <svg class="w-16 h-16 mx-auto mb-4 opacity-30" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
              </svg>
              <p>No description provided.</p>
            </div>
          </ng-template>
        </div>
      </div>

      <!-- Comments Section -->
      <div *ngIf="comments.length > 0" class="space-y-6">
        <div class="flex items-center gap-3">
          <div class="w-10 h-10 rounded-xl flex items-center justify-center" style="background: linear-gradient(135deg, #06b6d4 0%, #a855f7 100%);">
            <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M18 10c0 3.866-3.582 7-8 7a8.841 8.841 0 01-4.083-.98L2 17l1.338-3.123C2.493 12.767 2 11.434 2 10c0-3.866 3.582-7 8-7s8 3.134 8 7zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path>
            </svg>
          </div>
          <h3 class="text-2xl font-bold gradient-text font-display">
            {{ comments.length }} {{ comments.length === 1 ? 'Comment' : 'Comments' }}
          </h3>
        </div>
        
        <div *ngFor="let comment of comments; let i = index" 
             class="premium-card rounded-2xl overflow-hidden hover:shadow-2xl transition-all duration-300">
          <div class="px-8 py-4 border-b border-gray-800" style="background: rgba(168, 85, 247, 0.05);">
            <div class="flex items-center gap-4">
              <img [src]="comment.user.avatar_url" [alt]="comment.user.login" class="w-10 h-10 rounded-full ring-2 ring-purple-500/50 shadow-lg">
              <div class="flex-1">
                <div class="font-bold text-white text-base">{{ comment.user.login }}</div>
                <div class="text-sm text-gray-400">commented {{ getRelativeTime(comment.created_at) }}</div>
              </div>
              <span class="text-gray-500 font-mono text-sm">#{{ i + 1 }}</span>
            </div>
          </div>
          
          <div class="p-8">
            <div 
              class="markdown-body prose-invert max-w-none"
              [innerHTML]="getRenderedComment(comment.id)"
            ></div>
          </div>
        </div>
      </div>

      <!-- No Comments State -->
      <div *ngIf="comments.length === 0 && !loading" class="premium-card rounded-2xl p-12 text-center">
        <div class="w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4" style="background: rgba(100, 116, 139, 0.1);">
          <svg class="w-10 h-10 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
          </svg>
        </div>
        <p class="text-gray-400 text-xl font-semibold mb-2">No comments yet</p>
        <p class="text-gray-500">Be the first to share your thoughts!</p>
      </div>
    </div>
  </div>
</div>
